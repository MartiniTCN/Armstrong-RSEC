name: ⏰ Keep Render Awake

on:
  schedule:
  - cron: '*/0 7-23 * * *'  # 早 7 点到晚 11 点，每 小时一次，如果希望30分钟，则修改 0 为 30）

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: 🔁 Ping Render with Retry
        run: |
          echo "🌐 正在尝试唤醒 Render 应用..."
          for i in {1..5}; do
            echo "⏳ 第 $i 次尝试请求..."
            if curl -I -sSf https://armstrong-rsec.onrender.com/health; then
              echo "✅ Render 正常响应！"
              exit 0
            else
              echo "⚠️ 请求失败（第 $i 次），3 秒后重试..."
              sleep 3
            fi
          done
          echo "❌ 所有尝试失败，Render 可能处于休眠状态或地址错误"
          exit 1
