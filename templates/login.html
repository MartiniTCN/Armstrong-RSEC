<!DOCTYPE html>
<html class="scroll-smooth" lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Armstrong 解决方案学习与测评系统</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
          },
          borderRadius: {
            DEFAULT: '1rem',
          },
        }
      }
    }
  </script>
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    /* ✅ 标题字体控制：使用苹果默认字体 + 微调字号 + 保证跨平台兼容 */
    #titleText {
      font-size: 18px; /* ✅ 默认字号略小一些，防止过长英文换行 */
      font-weight: bold; /* ✅ 加粗标题 */
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      white-space: nowrap; /* ✅ 强制不换行 */
      overflow: hidden; /* ✅ 溢出隐藏 */
      text-overflow: ellipsis; /* ✅ 溢出以省略号表示 */
    }

    /* ✅ 避免点击按钮时触发输入框验证 */
    button:focus {
      outline: none;
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
  <main class="min-h-screen flex items-center justify-center p-4">
    <section id="loginCard" class="w-full max-w-sm bg-white/30 dark:bg-white/10 backdrop-blur-xl border border-white/30 dark:border-white/10 rounded-2xl shadow-2xl p-6 sm:p-8">
      <div class="text-center mb-6">
        <img alt="Armstrong Logo" class="h-12 mx-auto mb-4" src="https://i.stardots.io/armstrong/Armstrong%20Logo%20-%20Martin.png?width=500" />
        <!-- ✅ 标题字体优化见 style 部分 -->
        <h1 id="titleText">Armstrong 解决方案学习与测评系统</h1>
      </div>
      <form id="loginForm" class="space-y-5" method="post">
        <div>
          <input id="username" name="username" type="text" required placeholder="请输入用户名" class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600" />
        </div>
        <div class="relative">
          <input id="password" name="password" type="password" required placeholder="请输入密码" class="w-full pr-10 px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600" />
          <!-- 密码显隐按钮 -->
          <span class="absolute inset-y-0 right-3 flex items-center text-gray-500 cursor-pointer" onclick="togglePassword()">
            <i class="fas fa-eye" id="toggleIcon"></i>
          </span>
        </div>
        <div class="pt-2 flex items-center justify-between">
          <!-- ✅ 明暗切换图标按钮（自动切换太阳/月亮） -->
          <button type="button" class="p-2" onclick="toggleTheme()">
            <i class="fas fa-sun text-gray-500 dark:hidden" id="sunIcon"></i>
            <i class="fas fa-moon text-gray-200 hidden dark:inline" id="moonIcon"></i>
          </button>
          <button type="submit" class="px-6 py-2 text-white rounded-2xl bg-primary hover:bg-blue-700">登录</button>
          <!-- ✅ 语言切换按钮 -->
          <button type="button" class="text-2xl" onclick="toggleLang()">
            <span id="langFlag">🇺🇸</span>
          </button>
        </div>
      </form>
    </section>
  </main>

  <script>
    let isChinese = true;

    // ✅ 密码显隐切换
    function togglePassword() {
      const pw = document.getElementById('password');
      const icon = document.getElementById('toggleIcon');
      if (pw.type === 'password') {
        pw.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        pw.type = 'password';
        icon.classList.add('fa-eye');
        icon.classList.remove('fa-eye-slash');
      }
    }

    // ✅ 明暗模式切换 + 图标切换
    function toggleTheme() {
      const html = document.documentElement;
      html.classList.toggle('dark');
    }

    // ✅ 中英文切换，并刷新标题内容 & 自适应文字宽度
    function toggleLang() {
      isChinese = !isChinese;
      const title = document.getElementById('titleText');
      title.textContent = isChinese
        ? 'Armstrong 解决方案学习与测评系统'
        : 'Armstrong Solutions Value Learning & Assessment Platform';
      document.getElementById('langFlag').textContent = isChinese ? '🇺🇸' : '🇨🇳';
      resizeTitleText();
    }

    // ✅ 动态调整标题字号，保持一行显示且不溢出
    function resizeTitleText() {
      const title = document.getElementById('titleText');
      const container = document.getElementById('loginCard');
      let fontSize = 18; // 默认起始字体大小 px
      title.style.fontSize = fontSize + 'px'; // 设置初始值

      // 如果标题内容宽度超出容器，则减小字体直到合适
      while (title.scrollWidth > container.clientWidth && fontSize > 12) {
        fontSize--;
        title.style.fontSize = fontSize + 'px';
      }
    }

    window.addEventListener('load', resizeTitleText);
    window.addEventListener('resize', resizeTitleText);
  </script>
</body>
</html>
