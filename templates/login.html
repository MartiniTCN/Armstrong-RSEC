<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è§£å†³æ–¹æ¡ˆæ¢ç´¢ä¸è€ƒè¯•ç³»ç»Ÿ</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
          },
          borderRadius: {
            DEFAULT: '1rem',
          },
        }
      }
    }
  </script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- å¼•å…¥ Twemoji åº“ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/twemoji.min.js"></script>
  <style>
    #cnFlag, #ukFlag {
        font-size: 30px;
        vertical-align: middle;
    }
    .shake {
      animation: shake 0.4s ease-in-out;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-8px); }
      40%, 80% { transform: translateX(8px); }
    }
    .animate-fade-in {
      opacity: 0;
      animation: fadeIn 1s ease-out forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    .watermark-tile {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0; pointer-events: none;
      overflow: hidden;
    }
    .watermark-instance {
      position: absolute;
      width: 180px; height: 180px;
      background-image: url('https://i.stardots.io/armstrong/%E6%B0%B4%E5%8D%B0%E5%9B%BE%E7%89%87%20-%20%E9%87%91%E8%89%B2_%E5%89%AF%E6%9C%AC.png?width=500');
      background-repeat: no-repeat;
      background-size: contain;
      opacity: 0.3; transform: rotate(-30deg);
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">

<!-- é¡µé¢åŠ è½½é®ç½© -->
<div id="loadingOverlay" class="fixed inset-0 bg-white dark:bg-gray-900 z-50 flex flex-col items-center justify-center">
  <img src="https://i.stardots.io/armstrong/Armstrong%20Logo%20-%20Martin.png?width=200" alt="Loading..." class="animate-spin-slow w-12 h-12 mb-4">
  <p class="text-gray-700 dark:text-gray-200 text-sm">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™...</p>
</div>
<!-- æ°´å°å®¹å™¨ -->
<div class="watermark-tile" id="watermarkContainer"></div>

<!-- ç™»å½• / æ³¨å†Œ è¡¨å•å¡ç‰‡ -->
<main class="min-h-screen flex items-center justify-center p-4 relative z-10">
<section class="w-full max-w-md bg-white/30 dark:bg-white/10 backdrop-blur-xl border border-white/30 dark:border-white/10 rounded-2xl shadow-2xl pt-4 pb-1 px-6 sm:pt-4 sm:pb-1 sm:px-7" id="loginCard">
  <!-- Logo ä¸æ ‡é¢˜ -->
  <div class="text-center mb-4 animate-fade-in">
    <img alt="Armstrong Logo" class="h-12 mx-auto mb-3" src="https://i.stardots.io/armstrong/Armstrong%20Logo%20-%20Martin.png?width=500"/>
    <h1 class="text-xl font-bold" id="titleText">äº§å“å­¦ä¹ ä¸è¯„æµ‹ç³»ç»Ÿ</h1>
    <p class="text-sm text-gray-500 dark:text-gray-200" id="subtitleText">æœ‰ç›®æ ‡åœ°å­¦ä¹  æœ‰æ´å¯Ÿåœ°è¯„ä¼°</p>
  </div>

  <!-- âœ… ç™»å½• / æ³¨å†Œ åˆ‡æ¢ Tab -->
  <div class="flex justify-center gap-4 text-sm font-semibold mb-4">
    <button onclick="toggleForm('login')" id="loginTab" class="text-blue-500">ç™»å½•</button>
    <button onclick="toggleForm('register')" id="registerTab" class="text-gray-400">æ³¨å†Œ</button>
  </div>

  <!-- âœ… è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼šä¿æŒä¸ course_selection.html ä¸€è‡´ -->
<div class="text-center mb-4">
  <button type="button" onclick="toggleLang()" class="text-2xl transition-transform transform hover:scale-110">
    <span id="langFlag">ğŸ‡¨ğŸ‡³</span>
  </button>
</div>

  <!-- âœ… ç™»å½•è¡¨å• -->
  <form method="post" action="/login" id="loginForm" class="space-y-5">
    <input type="text" name="username" placeholder="ç”¨æˆ·å" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white">
    <input type="password" name="password" placeholder="å¯†ç " required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white">
    <div class="flex justify-between">
      <button type="submit" class="px-6 py-2 text-white rounded-2xl bg-primary hover:bg-blue-700">ç™»å½•</button>
    </div>
  </form>

  <!-- âœ… æ³¨å†Œè¡¨å•ï¼ˆé»˜è®¤éšè—ï¼‰ -->
  <form method="post" action="/register" id="registerForm" class="space-y-3 hidden">
    <input name="username" placeholder="ç”¨æˆ·åï¼ˆå­—æ¯+æ•°å­—ï¼‰" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white">
    <input type="password" name="password" placeholder="å¯†ç " required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="company" placeholder="å•ä½åç§°" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="city" placeholder="åŸå¸‚" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="email" placeholder="é‚®ç®±" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="phone" placeholder="ç”µè¯" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="sales" placeholder="Armstrong é”€å”®å§“å" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <input name="invite_code" placeholder="é‚€è¯·ç ï¼ˆè¯·è”ç³» RSEC éƒ¨é—¨ Martin Pengï¼‰" required class="w-full px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700">
    <div class="flex justify-between">
      <button type="submit" class="px-6 py-2 text-white rounded-2xl bg-primary hover:bg-blue-700">æ³¨å†Œ</button>
    </div>
  </form>
</section>
</main>

<!-- âœ… è‡ªåŠ¨ç”Ÿæˆæ°´å° -->
<script>
  const watermarkContainer = document.getElementById('watermarkContainer');
  for (let i = 0; i < 50; i++) {
    const wm = document.createElement('div');
    wm.className = 'watermark-instance';
    wm.style.top = Math.random() * window.innerHeight + 'px';
    wm.style.left = Math.random() * window.innerWidth + 'px';
    watermarkContainer.appendChild(wm);
  }
</script>

<!-- âœ… ç™»å½• / æ³¨å†Œ åˆ‡æ¢é€»è¾‘ -->
<script>
  function toggleForm(type) {
    document.getElementById('loginForm').classList.toggle('hidden', type !== 'login');
    document.getElementById('registerForm').classList.toggle('hidden', type !== 'register');
    document.getElementById('loginTab').classList.toggle('text-blue-500', type === 'login');
    document.getElementById('loginTab').classList.toggle('text-gray-400', type !== 'login');
    document.getElementById('registerTab').classList.toggle('text-blue-500', type === 'register');
    document.getElementById('registerTab').classList.toggle('text-gray-400', type !== 'register');
  }
</script>

<!-- âœ… ä¸­è‹±æ–‡åˆ‡æ¢è„šæœ¬ -->
<script>
  let isChinese = true;

  function toggleLang() {
    isChinese = !isChinese;
    document.getElementById('titleText').textContent = isChinese ? 'äº§å“å­¦ä¹ ä¸è¯„æµ‹ç³»ç»Ÿ' : 'Learning & Evaluation System';
    document.getElementById('subtitleText').textContent = isChinese ? 'æœ‰ç›®æ ‡åœ°å­¦ä¹  æœ‰æ´å¯Ÿåœ°è¯„ä¼°' : 'Learn with purpose. Evaluate with insight.';

    // ç™»å½•è¡¨å•å­—æ®µå ä½
    document.querySelector('#loginForm input[name="username"]').placeholder = isChinese ? 'ç”¨æˆ·å' : 'Username';
    document.querySelector('#loginForm input[name="password"]').placeholder = isChinese ? 'å¯†ç ' : 'Password';
    document.querySelector('#loginForm button[type="submit"]').textContent = isChinese ? 'ç™»å½•' : 'Login';

    // æ³¨å†Œè¡¨å•å­—æ®µå ä½
    document.querySelector('#registerForm input[name="username"]').placeholder = isChinese ? 'ç”¨æˆ·åï¼ˆå­—æ¯+æ•°å­—ï¼‰' : 'Username (letters + digits)';
    document.querySelector('#registerForm input[name="password"]').placeholder = isChinese ? 'å¯†ç ' : 'Password';
    document.querySelector('#registerForm input[name="company"]').placeholder = isChinese ? 'å•ä½åç§°' : 'Company';
    document.querySelector('#registerForm input[name="city"]').placeholder = isChinese ? 'åŸå¸‚' : 'City';
    document.querySelector('#registerForm input[name="email"]').placeholder = isChinese ? 'é‚®ç®±' : 'Email';
    document.querySelector('#registerForm input[name="phone"]').placeholder = isChinese ? 'ç”µè¯' : 'Phone';
    document.querySelector('#registerForm input[name="sales"]').placeholder = isChinese ? 'Armstrong é”€å”®å§“å' : 'Armstrong Sales Name';
    document.querySelector('#registerForm input[name="invite_code"]').placeholder = isChinese ? 'é‚€è¯·ç ï¼ˆè¯·è”ç³» RSEC éƒ¨é—¨ Martin Pengï¼‰' : 'Invite code (Contact Martin Peng - RSEC)';
    document.querySelector('#registerForm button[type="submit"]').textContent = isChinese ? 'æ³¨å†Œ' : 'Register';

    document.getElementById('loginTab').textContent = isChinese ? 'ç™»å½•' : 'Login';
    document.getElementById('registerTab').textContent = isChinese ? 'æ³¨å†Œ' : 'Register';
    document.getElementById('langFlag').textContent = isChinese ? 'ğŸ‡¨ğŸ‡³' : 'ğŸ‡¬ğŸ‡§';
  }
</script>

<!-- âœ… ç™»å½•å¤±è´¥è§¦å‘æŠ–åŠ¨ + æ¸…ç©ºå¯†ç  -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    {% if shake %}
      const card = document.getElementById('loginCard');
      const passwordInput = document.querySelector('#loginForm input[name="password"]');
      if (card) {
        card.classList.remove('shake'); // ç§»é™¤æ—§åŠ¨ç”»
        void card.offsetWidth;         // å¼ºåˆ¶åˆ·æ–°å›æµ
        card.classList.add('shake');   // æ·»åŠ æŠ–åŠ¨åŠ¨ç”»
      }
      if (passwordInput) passwordInput.value = ''; // æ¸…ç©ºå¯†ç 
    {% endif %}
  });
</script>

<!-- âœ… é¡µé¢åŠ è½½å®Œæˆåéšè—é®ç½© -->
<script>
  window.addEventListener('load', function () {
    document.getElementById('loadingOverlay').style.display = 'none';
  });
</script>


</body>
</html>
